{"ast":null,"code":"var _jsxFileName = \"/Users/i818433/Desktop/micro-project-master/src/login/login.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../Contexts/AuthContextComponent';\nimport Axios from 'axios';\nexport default function Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const authContext = useContext(AuthContext);\n  const [error, setError] = useState(false);\n  authContext.checkLogin();\n\n  function validateForm() {\n    return email.length > 0 && password.length > 0;\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!authContext.isAdmin) {\n      Axios.post(\"http://localhost:3000/login\", {\n        email: email,\n        password: password\n      }, {\n        headers: {\n          'content-type': 'application/json'\n        }\n      }).then(res => {\n        console.log(res.data);\n        localStorage.setItem(\"email\", res.data.user);\n        localStorage.setItem(\"sessionID\", res.data.sessionId);\n        setError(false);\n        authContext.checkLogin();\n        authContext.setAdmin(false);\n      }).catch(error => {\n        setError(true);\n      });\n    } else {\n      Axios.post(\"http://localhost:3000/admin\", {\n        email: email,\n        password: password\n      }, {\n        headers: {\n          'content-type': 'application/json'\n        }\n      }).then(res => {\n        console.log(res.data);\n        localStorage.setItem(\"email\", res.data.user);\n        localStorage.setItem(\"sessionID\", res.data.sessionId);\n        localStorage.setItem(\"isAdmin\", true);\n        setError(false);\n        authContext.checkLogin();\n        authContext.setAdmin(true);\n      }).catch(error => {\n        setError(true);\n      });\n    }\n  }\n\n  var errorHandler = () => {\n    if (error) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login-error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 20\n        }\n      }, \"Invalid Credentials\");\n    } else {\n      return null;\n    }\n  };\n\n  useEffect(() => {\n    authContext.checkLogin();\n  }, [authContext.isLoggedIn]);\n  useEffect(() => {\n    console.log(authContext.isAdmin);\n  }, [authContext.isAdmin]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"formContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, authContext.isLoggedIn ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"msg-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 14\n    }\n  }, \"Already Logged In \") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, \" Login \"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    controlId: \"email\",\n    bsSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    autoFocus: true,\n    type: \"email\",\n    value: email,\n    placeholder: \"Enter your Email\",\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    controlId: \"password\",\n    bsSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    placeholder: \"Enter your Password\",\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    controlId: \"admin\",\n    bsSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: \"scales\",\n    name: \"scales\",\n    checked: authContext.isAdmin,\n    onChange: () => {\n      authContext.setAdmin(!authContext.isAdmin);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"scales\",\n    style: {\n      marginLeft: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, \"Are you Admin ?\")), /*#__PURE__*/React.createElement(\"button\", {\n    block: true,\n    bsSize: \"large\",\n    disabled: !validateForm(),\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, \"Submit\"), errorHandler())));\n}","map":{"version":3,"sources":["/Users/i818433/Desktop/micro-project-master/src/login/login.js"],"names":["React","useState","useEffect","useContext","AuthContext","Axios","Login","email","setEmail","password","setPassword","authContext","error","setError","checkLogin","validateForm","length","handleSubmit","event","preventDefault","isAdmin","post","headers","then","res","console","log","data","localStorage","setItem","user","sessionId","setAdmin","catch","errorHandler","isLoggedIn","e","target","value","marginLeft"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useContext} from 'react';\nimport {AuthContext} from '../Contexts/AuthContextComponent';\nimport Axios from 'axios';\n\nexport default function Login() {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const authContext = useContext(AuthContext);\n    const [error,setError] = useState(false);\n\n    authContext.checkLogin();\n  \n    function validateForm() {\n      return email.length > 0 && password.length > 0;\n    }\n\n    \n  \n    function handleSubmit(event) {\n      event.preventDefault();\n      if(!authContext.isAdmin){\n                Axios.post(\"http://localhost:3000/login\",\n            {email:email,password:password},\n            {\n                headers: { \n                    'content-type' : 'application/json' \n                }\n            }\n            )\n            .then((res)=>{\n                console.log(res.data);\n                localStorage.setItem(\"email\",res.data.user);\n                localStorage.setItem(\"sessionID\",res.data.sessionId);\n                setError(false);\n                authContext.checkLogin();\n                authContext.setAdmin(false);\n            })\n            .catch((error)=>{\n                setError(true);\n            })\n      }\n      else{\n        Axios.post(\"http://localhost:3000/admin\",\n        {email:email,password:password},\n        {\n          headers: { \n              'content-type' : 'application/json' \n          }\n      }\n        )\n        .then((res)=>{\n            console.log(res.data);\n            localStorage.setItem(\"email\",res.data.user);\n            localStorage.setItem(\"sessionID\",res.data.sessionId);\n            localStorage.setItem(\"isAdmin\",true);\n            setError(false);\n            authContext.checkLogin();\n            authContext.setAdmin(true);\n        })\n        .catch((error)=>{\n            setError(true);\n        })\n  \n      }\n      \n    }\n\n    var errorHandler = ()=>{\n        if(error){\n            return <div className=\"login-error\">Invalid Credentials</div>\n        }\n        else{\n            return null\n        }\n    }\n\n    useEffect(\n        ()=>{\n            authContext.checkLogin();\n        },\n        [authContext.isLoggedIn]\n    )\n\n    useEffect(\n        ()=>{\n            console.log(authContext.isAdmin)\n        }\n        ,[authContext.isAdmin]\n    )\n  \n    return (\n        <div className=\"formContainer\">\n            { authContext.isLoggedIn\n            ?<div className=\"msg-success\">Already Logged In </div>\n            :\n            <div  className=\"Login\">\n            <p> Login </p>\n            <form onSubmit={handleSubmit}>\n                <div controlId=\"email\" bsSize=\"large\">\n                <input\n                autoFocus\n                type=\"email\"\n                value={email}\n                placeholder=\"Enter your Email\"\n                onChange={e => setEmail(e.target.value)}\n                />\n                </div>\n                <div controlId=\"password\" bsSize=\"large\">\n                    <input\n                    value={password}\n                    onChange={e => setPassword(e.target.value)}\n                    placeholder=\"Enter your Password\"\n                    type=\"password\"\n                    />\n                </div>\n                <div controlId=\"admin\" bsSize=\"large\">\n                <input type=\"checkbox\" id=\"scales\" name=\"scales\" checked = {authContext.isAdmin} onChange = {()=>{\n                    authContext.setAdmin(!authContext.isAdmin);\n                }} />\n                <label for=\"scales\" style={{marginLeft:'10px'}}>Are you Admin ?</label>\n                </div>\n                \n                <button block bsSize=\"large\" disabled={!validateForm()} type=\"submit\">\n                Submit\n                </button>\n                {errorHandler()}\n            </form>\n            </div>\n        \n        }\n            \n        </div>\n    );\n  }\n\n"]},"metadata":{},"sourceType":"module"}